<?xml version="1.0" encoding="utf-8" ?>
<sqlMap namespace="Page_pag" xmlns="http://ibatis.apache.org/mapping"	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  >
  <alias>
    <typeAlias alias="Page_pag" type="MC.Model.Page_pag,MC.Model" />
  </alias>

  <resultMaps>
    <resultMap id="SelectResult" class="Page_pag" >
      <result property="ID_pag" column="ID_pag" />
      <result property="Name_pag" column="Name_pag" />
      <result property="Code_pag" column="Code_pag" />
      <result property="Content_pag" column="Content_pag" />
      <result property="Parent_pag" column="Parent_pag" />
      <result property="Path_pag" column="Path_pag" />
      <result property="Sort_pag" column="Sort_pag" />
    </resultMap>
  </resultMaps>
  <statements>
    <sql id="MC.Model.Page_pag.sqlwhere">
      <dynamic prepend="WHERE">
        <isNotNull prepend="AND" property="ID_pag">
          ID_pag = #ID_pag#
        </isNotNull>
        <isNotNull prepend="AND" property="Name_pag">
          Name_pag = #Name_pag#
        </isNotNull>
        <isNotNull prepend="AND" property="Code_pag">
          Code_pag = #Code_pag#
        </isNotNull>
        <isNotNull prepend="AND" property="Content_pag">
          Content_pag = #Content_pag#
        </isNotNull>
        <isNotNull prepend="AND" property="Sort_pag">
          Sort_pag = #Sort_pag#
        </isNotNull>
        <isNotNull prepend="AND" property="Parent_pag">
          Parent_pag = #Parent_pag#
        </isNotNull>
        <isNotNull prepend="AND" property="Path_pag">
          Path_pag = #Path_pag#
        </isNotNull>
      </dynamic>
    </sql>
    <select id="MC.Model.Page_pag.Count" parameterClass="System.Collections.IDictionary" resultClass="int">
      Select count(1) FROM Page_pag <include refid="MC.Model.Page_pag.sqlwhere"/>
    </select>
    <select id="MC.Model.Page_pag.LoadPageList" parameterClass="System.Collections.IDictionary" resultMap="SelectResult">
      Select ID_pag,Name_pag,Code_pag,Content_pag,Sort_pag,Parent_pag,Path_pag FROM(
      Select ID_pag,Name_pag,Code_pag,Content_pag,Sort_pag,Parent_pag,Path_pag
      ,ROW_NUMBER() Over(
      <dynamic>
        <isNotNull property="sort">order by $sort$ $dir$</isNotNull>
        <isNull property="sort">order by ID_pag desc</isNull>
      </dynamic>) as rowNum
      FROM Page_pag
      <include refid="MC.Model.Page_pag.sqlwhere"/>
      ) as temptable
      <dynamic prepend="WHERE">
        <isNotNull prepend="AND" property="page">
          rowNum BETWEEN (#page#-1)*#rows#+1
          <isNotNull prepend="AND" property="rows">
            #page#*#rows#
          </isNotNull>
        </isNotNull>
      </dynamic>
    </select>
    <select id="MC.Model.Page_pag.Load" parameterClass="System.Collections.IDictionary" resultMap="SelectResult">
      Select ID_pag,Name_pag,Code_pag,Content_pag,Sort_pag,Parent_pag,Path_pag FROM Page_pag
      <include refid="MC.Model.Page_pag.sqlwhere"/>
      <dynamic>
        <isNotNull property="OrderBy">
          $OrderBy$
        </isNotNull>
      </dynamic>
    </select>
    <insert id="MC.Model.Page_pag.Insert" parameterClass="Page_pag">
      insert into Page_pag(
      Name_pag
      ,Code_pag
      ,Content_pag
      ,Sort_pag,Parent_pag,Path_pag
      )values (
      #Name_pag#
      ,#Code_pag#
      ,#Content_pag#
      ,#Sort_pag#,#Parent_pag#,#Path_pag#
      )
      <selectKey property="ID_pag" type="post" resultClass="int">
        ${selectKey}
      </selectKey>
    </insert>
    <update id="MC.Model.Page_pag.Update" parameterClass="Page_pag">
      update Page_pag set
      Name_pag = #Name_pag#
      ,Code_pag = #Code_pag#
      ,Content_pag = #Content_pag#
      ,Sort_pag = #Sort_pag#
      ,Parent_pag = #Parent_pag#
      ,Path_pag = #Path_pag#
      WHERE
      ID_pag = #ID_pag#
    </update>
    <delete id="MC.Model.Page_pag.Delete" parameterClass="list">
      delete
      FROM Page_pag
      WHERE ID_pag IN
      <iterate property="ids" open="(" close=")"  conjunction="," >
        #ids[]#
      </iterate>
    </delete>
  </statements>
</sqlMap>

