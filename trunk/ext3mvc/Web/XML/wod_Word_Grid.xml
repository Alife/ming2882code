<?xml version="1.0" encoding="utf-8" ?>
<Entity>
  <GridList>
    <Grid ID="wod_Word_Grid" Code="10000" Text="字典功能" IsPage="true" PageSize="20" AllowEdit="true" HasChecked="true" Url="sys/wordlist" KeyID="ID_wod" Region="center">
      <Column Field="ID_wod" HeaderText="ID" FieldType="int" Sortable="true" Hidden="true" Width="50"/>
      <Column Field="Code_wod" HeaderText="代码" FieldType="string" Sortable="true" Width="100"/>
      <Column Field="Text_wod" HeaderText="名称" FieldType="string" Sortable="true" Width="120"/>
      <Column Field="Sort_wod" HeaderText="排序" FieldType="string" Sortable="true" Width="50"/>
      <Rowdblclick Hander="_edit"></Rowdblclick>
      <ChildGrid>
        <Grid ID="wcd_WordChild_Grid" Text="字典明细" IsPage="true" PageSize="20" AllowEdit="true" HasChecked="true" Url="sys/wordchildlist/{0}" Region="south" width="300">
          <Column Field="ID_wcd" HeaderText="ID" FieldType="int" Hidden="true" Width="50"/>
          <Column Field="Code_wcd" HeaderText="拼音缩写" FieldType="string" Width="100"/>
          <Column Field="Text_wcd" HeaderText="名称" FieldType="string" Width="120"/>
          <Column Field="Sort_wcd" HeaderText="排序" FieldType="string" Width="50"/>
        </Grid>
      </ChildGrid>
    </Grid>
  </GridList>
  <QueryList>
    <Query ID="wod_Word_Query" Code="10000" Region="north" width="40">
      <Container Layout="column">
        <Column Field="ID_wod" FieldLabel="ID" FieldType="string" ControlType="numberfield" LabelWidth="50" ColumnWidth=".2" Layout="form"/>
        <Column Field="Code_wod" FieldLabel="代码" FieldType="int" ControlType="textfield" MaxLength="50" LabelWidth="50" ColumnWidth=".2" Layout="form"/>
        <Column Field="Text_wod" FieldLabel="名称" FieldType="string" ControlType="textfield" MaxLength="50" LabelWidth="50" ColumnWidth=".6" Layout="form"/>
      </Container>
    </Query>
  </QueryList>
  <FormList>
    <Form ID="wod_Word_Form" Code="10000" Text="字典功能维护" WinWidth="400" WinHeight="0">
      <!--<Tab tabIndex="0" Text="基本信息">-->
      <!--<Container Layout="hbox" ControlType="textfield" LabelAlign="right" LabelWidth="60" Width="200">-->
      <!--DIV宽度为原则的排版方式-->
      <Column Field="ID_wod" FieldLabel="ID" ControlType="hiddenfield" width="0"/>
      <Column Field="Code_wod" FieldLabel="代码" ControlType="textfield" MaxLength="50" AllowBlank="false">
        <Validator Url="sys/wordcheckCode" Error="代码已存在，请重新填写"/>
        <!--<Validator>
          <![CDATA[
          validator: {
                        fn: function(code) {
                            if (code) {
                                var oldcode = ''; if (winType == 'edit') oldcode = getSelectionModel().getSelection()[0].data.Code;
                                var json = ming.ajax({ url: 'sys/wordCheckCode', params: { code: code, oldcode: oldcode }, isEecode: true });
                                if (json.success) return json.success;
                                else return '代码已存在，请重新填写';
                            } return true;
                        }, scope: me
                    }
          ]]>
        </Validator>-->
        <!--验证是否存在，如果Validator节点有内容则以内容输出，否则默认方法-->
      </Column>
      <Column Field="Text_wod" FieldLabel="名称" ControlType="textfield" MaxLength="50" AllowBlank="false"/>
      <Column Field="Sort_wod" FieldLabel="排序" ControlType="numberfield" MaxLength="10" AllowBlank="false" LabelWidth="50"/>
      <!--</Container>-->
      <!--</Tab>-->
    </Form>
  </FormList>
  <ToolBarList>
    <ToolBar Code="10000">
      <GridButtons>
        <Button RuleName="add" Text="新建" ToolTip="新建" IconCls="application_add" OpenType="win_form" OpenWinID="wod_Word_Form" Handler="_add" IsDynamics="false"/>
        <Button RuleName="edit" Text="编辑" ToolTip="编辑" IconCls="application_edit" OpenType="win_form" OpenWinID="wod_Word_Form" Handler="_edit" IsDynamics="false" DetailUrl="sys/worddetail/" Disabled="true" Ref="editBtn"/>
        <Button RuleName="del" Text="删除" ToolTip="删除" IconCls="application_delete" Handler="_del" DeleteUrl="sys/worddel/" Disabled="true" Ref="delBtn"/>
        <Button RuleName="report" Text="导出Excel" ToolTip="导出Excel" IconCls="report" Handler="_report"/>
        <Button RuleName="" Text="刷新" ToolTip="刷新" IconCls="refresh" Handler="_refresh"/>
      </GridButtons>
      <FormButtons>
        <Button RuleName="add,edit" Text="保存" ToolTip="保存" Handler="_save" AddUrl="sys/wordadd" EditUrl="sys/wordedit"/>
        <Button RuleName="add,edit" Text="保存并新建" ToolTip="保存并新建" Handler="_save" Query="add"/>
        <Button RuleName="add,edit" Text="保存并关闭" ToolTip="保存并关闭" Handler="_save" Query="colse"/>
        <Button RuleName="" Text="关闭" ToolTip="关闭" Handler="_close"/>
      </FormButtons>
      <QueryButtons>
        <Button RuleName="" Text="查询" ToolTip="查询"/>
        <Button RuleName="" Text="清空" ToolTip="清空"/>
      </QueryButtons>
    </ToolBar>
  </ToolBarList>
</Entity>